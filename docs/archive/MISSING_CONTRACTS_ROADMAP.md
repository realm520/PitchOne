# å¾…å®ç°åˆçº¦æ¸…å•ä¸å®æ–½è·¯çº¿å›¾

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1
**ç”Ÿæˆæ—¥æœŸ**: 2025-11-01ï¼ˆæ›´æ–°ï¼‰
**é¡¹ç›®é˜¶æ®µ**: Week 5-6 (KeeperæœåŠ¡å¼€å‘ä¸­)

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

**å·²å®ç°åˆçº¦**: 10ä¸ªæ ¸å¿ƒåˆçº¦
**å¾…å®ç°åˆçº¦**: 9ä¸ªæ ¸å¿ƒåˆçº¦
**åˆçº¦å®ç°è¿›åº¦**: 52% (10/19)
**æµ‹è¯•é€šè¿‡ç‡**: 100% (344/344 æµ‹è¯•é€šè¿‡)

---

## âœ… å·²å®ç°åˆçº¦æ¸…å•

### æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼ˆ6ä¸ªï¼‰

| åˆçº¦åç§° | è·¯å¾„ | çŠ¶æ€ | æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ |
|---------|------|------|---------|---------|
| **MarketBase** | `src/core/MarketBase.sol` | âœ… å·²å®ç° | BaseTest + WDL_Template.t.sol | 51+ |
| **MarketTemplateRegistry** | `src/core/MarketTemplateRegistry.sol` | âœ… å·²å®ç° | MarketTemplateRegistry.t.sol | 32 |
| **FeeRouter** | `src/core/FeeRouter.sol` | âœ… å·²å®ç° | FeeRouter.t.sol | 29 |
| **RewardsDistributor** | `src/core/RewardsDistributor.sol` | âœ… å·²å®ç° | RewardsDistributor.t.sol | 42 |
| **ReferralRegistry** | `src/core/ReferralRegistry.sol` | âœ… å·²å®ç° | ReferralRegistry.t.sol | 41 |
| **SimpleCPMM** | `src/pricing/SimpleCPMM.sol` | âœ… å·²å®ç° | SimpleCPMM.t.sol | 23 |

### é¢„è¨€æœºï¼ˆ2ä¸ªï¼‰

| åˆçº¦åç§° | è·¯å¾„ | çŠ¶æ€ | æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ |
|---------|------|------|---------|---------|
| **MockOracle** | `src/oracle/MockOracle.sol` | âœ… å·²å®ç° | MockOracle.t.sol + OracleIntegration.t.sol | 19+9 |
| **UMAOptimisticOracleAdapter** | `src/oracle/UMAOptimisticOracleAdapter.sol` | âœ… å·²å®ç° | UMAAdapter.t.sol + KeeperUMAIntegration.t.sol | 24+4 |

### å¸‚åœºæ¨¡æ¿ï¼ˆ2ä¸ªï¼‰

| åˆçº¦åç§° | è·¯å¾„ | çŠ¶æ€ | æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ |
|---------|------|------|---------|---------|
| **WDL_Template** | `src/templates/WDL_Template.sol` | âœ… å·²å®ç° | WDL_Template.t.sol + MarketBase_Redeem.t.sol | 51+6 |
| **OU_Template** | `src/templates/OU_Template.sol` | âœ… å·²å®ç° | OU_Template.t.solï¼ˆå« Push é€€æ¬¾æœºåˆ¶ï¼‰| 5ï¼ˆä¸“é¡¹ï¼‰+ 298ï¼ˆæ€»è®¡ï¼‰|

**å·²å®ç°åˆçº¦æ€»æµ‹è¯•æ•°**: 344ä¸ªæµ‹è¯•ï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

---

## ğŸ”´ å¾…å®ç°åˆçº¦æ¸…å•

### 1. å®šä»·å¼•æ“ï¼ˆ2ä¸ªï¼‰

#### 1.1 LMSR - å¯¹æ•°å¸‚åœºè¯„åˆ†è§„åˆ™

**åˆçº¦åç§°**: `LMSR.sol`
**è·¯å¾„**: `src/pricing/LMSR.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M3 (ç¬¬9-12å‘¨)
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆç²¾ç¡®æ¯”åˆ†å¸‚åœºå¿…éœ€ï¼‰
**é¢„ä¼°å·¥ä½œé‡**: 5-7å¤©

**åŠŸèƒ½æè¿°**:
- å®ç°å¯¹æ•°å¸‚åœºè¯„åˆ†è§„åˆ™ï¼ˆLogarithmic Market Scoring Ruleï¼‰
- é€‚ç”¨äºå¤šç»“æœå¸‚åœºï¼ˆå¦‚ç²¾ç¡®æ¯”åˆ† 0-0, 1-0, 1-1, 2-0...ï¼‰
- è‡ªåŠ¨å¹³è¡¡å¤šä¸ªç»“æœçš„æµåŠ¨æ€§
- ç›¸æ¯”CPMMï¼Œå¯¹æç«¯èµ”ç‡æ›´å‹å¥½

**å…³é”®æ¥å£**:
```solidity
interface ILMSR {
    function calculateCost(
        uint256[] memory reserves,
        uint256 outcomeId,
        uint256 shares,
        uint256 b // æµåŠ¨æ€§å‚æ•°
    ) external pure returns (uint256 cost);

    function calculatePrice(
        uint256[] memory reserves,
        uint256 outcomeId,
        uint256 b
    ) external pure returns (uint256 price);
}
```

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: æ— 
- è¢«ä¾èµ–: ScoreTemplate (ç²¾ç¡®æ¯”åˆ†æ¨¡æ¿)

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥20ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] ä»·æ ¼æ›²çº¿éªŒè¯
- [ ] æç«¯æƒ…å†µæµ‹è¯•ï¼ˆå•ä¸€ç»“æœå¤§é¢ä¸‹æ³¨ï¼‰
- [ ] Gasä¼˜åŒ–éªŒè¯
- [ ] ä¸å˜é‡æµ‹è¯•ï¼ˆEchidnaï¼‰

**å‚è€ƒèµ„æ–™**:
- [Hanson's LMSR Paper](https://mason.gmu.edu/~rhanson/mktscore.pdf)
- Gnosis Conditional Tokens Framework

---

#### 1.2 LinkedLinesController - è”åŠ¨çº¿æ§åˆ¶å™¨

**åˆçº¦åç§°**: `LinkedLinesController.sol`
**è·¯å¾„**: `src/pricing/LinkedLinesController.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2 (ç¬¬5-8å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆOUå¤šçº¿ã€AHè”åŠ¨å¿…éœ€ï¼‰
**é¢„ä¼°å·¥ä½œé‡**: 4-6å¤©

**åŠŸèƒ½æè¿°**:
- ç®¡ç†OUï¼ˆå¤§å°çƒï¼‰å¤šçº¿å¸‚åœºçš„è”åŠ¨å®šä»·
- ç®¡ç†AHï¼ˆè®©çƒï¼‰å¤šçº¿å¸‚åœºçš„è”åŠ¨å®šä»·
- ç¡®ä¿ç›¸é‚»çº¿ä¹‹é—´çš„ä»·æ ¼ä¸€è‡´æ€§
- é˜²æ­¢å¥—åˆ©æœºä¼š

**å…³é”®åŠŸèƒ½**:
- ç›¸é‚»çº¿è”åŠ¨ç³»æ•°è®¡ç®— (ä¾‹å¦‚ï¼šå¤§2.5çƒä»·æ ¼åº”å½±å“å¤§2.0çƒä»·æ ¼)
- åŠ¨æ€è°ƒæ•´å‚¨å¤‡é‡ä»¥ç»´æŒä»·æ ¼å…³ç³»
- æ”¯æŒå¤šçº¿åŒæ—¶å¼€ç›˜

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: SimpleCPMM
- è¢«ä¾èµ–: OU_Template (å¤šçº¿), AH_Template (å¤šçº¿)

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥15ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] è”åŠ¨ä¸€è‡´æ€§éªŒè¯
- [ ] å¥—åˆ©æ£€æµ‹æµ‹è¯•
- [ ] æç«¯ä»·æ ¼åœºæ™¯æµ‹è¯•

---

### 2. å¸‚åœºæ¨¡æ¿ï¼ˆ1ä¸ªï¼‰

#### 2.1 AH_Template - è®©çƒå¸‚åœºæ¨¡æ¿

**åˆçº¦åç§°**: `AH_Template.sol`
**è·¯å¾„**: `src/templates/AH_Template.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2 (ç¬¬5-8å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„ä¼°å·¥ä½œé‡**: 4-6å¤©

**åŠŸèƒ½æè¿°**:
- å®ç°è®©çƒï¼ˆAsian Handicapï¼‰å¸‚åœº
- æ”¯æŒæ•´æ•°ç›˜ï¼ˆ0, -1, +1ï¼‰ã€åŠçƒç›˜ï¼ˆ-0.5, +0.5ï¼‰ã€å¹³åŠç›˜ï¼ˆ0/-0.5ï¼‰
- æ”¯æŒå¤šçº¿è”åŠ¨å®šä»·
- å¤„ç†å¤æ‚çš„é€€æ¬¾è§„åˆ™ï¼ˆå¹³åŠç›˜ã€å¹³çƒç›˜ï¼‰

**å¸‚åœºå‚æ•°**:
```solidity
struct AHMarketParams {
    string matchId;
    string homeTeam;
    string awayTeam;
    uint256 kickoffTime;
    int256 handicap; // è®©çƒæ•°ï¼ˆ-1.5 = -1500, +0.5 = 500ï¼‰
    bool isAsianLine; // æ˜¯å¦å¹³åŠç›˜ï¼ˆéœ€è¦æ‹†åˆ†ä¸‹æ³¨ï¼‰
}
```

**å¤æ‚åº¦**:
- è®©çƒç›˜ç»“ç®—é€»è¾‘å¤æ‚ï¼ˆéœ€è€ƒè™‘å®é™…æ¯”åˆ† + è®©çƒæ•°ï¼‰
- å¹³åŠç›˜éœ€è¦æ‹†åˆ†ä¸‹æ³¨ï¼ˆä¸€åŠä¸‹0ç›˜ï¼Œä¸€åŠä¸‹-0.5ç›˜ï¼‰
- å¤šçº¿è”åŠ¨ï¼ˆå¦‚-0.5, -1, -1.5, -2åŒæ—¶å¼€ç›˜ï¼‰

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase, SimpleCPMM, LinkedLinesController
- è¢«ä¾èµ–: æ— 

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥35ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] å„ç§è®©çƒç›˜ç»“ç®—æµ‹è¯•
- [ ] é€€æ¬¾åœºæ™¯æµ‹è¯•
- [ ] å¤šçº¿è”åŠ¨æµ‹è¯•

---

#### 2.3 ScoreTemplate - ç²¾ç¡®æ¯”åˆ†å¸‚åœºæ¨¡æ¿

**åˆçº¦åç§°**: `ScoreTemplate.sol`
**è·¯å¾„**: `src/templates/ScoreTemplate.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M3 (ç¬¬9-12å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½
**é¢„ä¼°å·¥ä½œé‡**: 5-7å¤©

**åŠŸèƒ½æè¿°**:
- å®ç°ç²¾ç¡®æ¯”åˆ†å¸‚åœºï¼ˆå¦‚0-0, 1-0, 1-1, 2-0, 0-1, 2-1...ï¼‰
- ä½¿ç”¨LMSRå®šä»·å¼•æ“ï¼ˆå› ä¸ºç»“æœæ•°é‡å¤šï¼ŒCPMMä¸é€‚ç”¨ï¼‰
- æ”¯æŒå¸¸è§æ¯”åˆ† + "å…¶ä»–æ¯”åˆ†"å…œåº•é€‰é¡¹
- é«˜èµ”ç‡å¸‚åœºï¼ˆå•ä¸ªç»“æœæ¦‚ç‡ä½ï¼‰

**å¸‚åœºç»“æœç¤ºä¾‹**:
```
0-0, 1-0, 0-1, 1-1, 2-0, 0-2, 2-1, 1-2, 2-2,
3-0, 0-3, 3-1, 1-3, 3-2, 2-3, å…¶ä»–æ¯”åˆ†
```

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase, LMSR
- è¢«ä¾èµ–: æ— 

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥25ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] LMSRå®šä»·æ­£ç¡®æ€§éªŒè¯
- [ ] å¤§é‡ç»“æœåœºæ™¯æµ‹è¯•
- [ ] "å…¶ä»–æ¯”åˆ†"å…œåº•é€»è¾‘æµ‹è¯•

---

### 3. ä¸²å…³ç³»ç»Ÿï¼ˆ2ä¸ªï¼‰

#### 3.1 Basket - ä¸²å…³åˆçº¦

**åˆçº¦åç§°**: `Basket.sol`
**è·¯å¾„**: `src/parlay/Basket.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2-M3 (ç¬¬5-12å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„ä¼°å·¥ä½œé‡**: 6-8å¤©

**åŠŸèƒ½æè¿°**:
- å®ç°ä¸²å…³ï¼ˆParlayï¼‰ç»„åˆä¸‹æ³¨
- æ”¯æŒ2-10åœºå¸‚åœºç»„åˆ
- è‡ªåŠ¨è®¡ç®—ç»„åˆèµ”ç‡ï¼ˆå„å¸‚åœºèµ”ç‡ç›¸ä¹˜ï¼‰
- é›†æˆç›¸å…³æ€§æ£€æŸ¥ï¼ˆé€šè¿‡CorrelationGuardï¼‰
- å…¨ä¸­æ‰èµ¢ï¼Œä»»ä¸€é”™è¯¯å…¨è¾“

**å…³é”®æ¥å£**:
```solidity
function createParlay(
    address[] calldata markets,
    uint256[] calldata outcomes,
    uint256 amount
) external returns (uint256 parlayId);

function redeemParlay(uint256 parlayId) external returns (uint256 payout);
```

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase (å„å¸‚åœºåˆçº¦), CorrelationGuard
- è¢«ä¾èµ–: æ— 

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥30ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] 2-10åœºä¸²å…³åœºæ™¯æµ‹è¯•
- [ ] èµ”ç‡è®¡ç®—éªŒè¯
- [ ] ç»“ç®—é€»è¾‘æµ‹è¯•ï¼ˆå…¨ä¸­ã€éƒ¨åˆ†é”™ã€å…¨é”™ï¼‰
- [ ] Gasä¼˜åŒ–æµ‹è¯•ï¼ˆå¤§ä¸²å…³ï¼‰

---

#### 3.2 CorrelationGuard - ç›¸å…³æ€§å®ˆå«

**åˆçº¦åç§°**: `CorrelationGuard.sol`
**è·¯å¾„**: `src/parlay/CorrelationGuard.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2-M3 (ç¬¬5-12å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„ä¼°å·¥ä½œé‡**: 4-6å¤©

**åŠŸèƒ½æè¿°**:
- æ£€æµ‹ä¸²å…³ä¸­çš„ç›¸å…³æ€§ï¼ˆå¦‚åŒåœºWDL+OUä¸åº”ç»„åˆï¼‰
- åº”ç”¨ç›¸å…³æ€§æƒ©ç½šï¼ˆé™ä½ç»„åˆèµ”ç‡ï¼‰æˆ–ç›´æ¥é˜»æ–­
- ç»´æŠ¤ç›¸å…³æ€§çŸ©é˜µï¼ˆé“¾ä¸‹è®¡ç®—ï¼Œé“¾ä¸ŠéªŒè¯ï¼‰
- æ”¯æŒæ²»ç†æ›´æ–°ç›¸å…³æ€§è§„åˆ™

**ç›¸å…³æ€§è§„åˆ™ç¤ºä¾‹**:
```
åŒåœºåŒå‘ï¼ˆå¦‚æ›¼è”èµ¢+å¤§2.5çƒï¼‰: èµ”ç‡æŠ˜æ‰£20%
åŒåœºåå‘ï¼ˆå¦‚æ›¼è”èµ¢+å°2.5çƒï¼‰: é˜»æ–­
ä¸åŒåœº: æ— æƒ©ç½š
```

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase (è·å–å¸‚åœºä¿¡æ¯)
- è¢«ä¾èµ–: Basket

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥20ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] å„ç§ç›¸å…³æ€§åœºæ™¯æµ‹è¯•
- [ ] èµ”ç‡æƒ©ç½šè®¡ç®—éªŒè¯
- [ ] æ²»ç†æ›´æ–°æµ‹è¯•

---

### 4. è¿è¥åŸºå»ºï¼ˆ3ä¸ªï¼‰

#### 4.1 Campaign & Quest - æ´»åŠ¨ä¸ä»»åŠ¡å·¥å‚

**åˆçº¦åç§°**: `Campaign.sol` + `Quest.sol`
**è·¯å¾„**: `src/campaign/Campaign.sol`, `src/campaign/Quest.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2 (ç¬¬5-8å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½
**é¢„ä¼°å·¥ä½œé‡**: 5-7å¤©

**åŠŸèƒ½æè¿°**:
- **Campaign**: æ´»åŠ¨å·¥å‚ï¼ˆå¦‚"ä¸–ç•Œæ¯æ¨å¹¿æ´»åŠ¨"ï¼‰
- **Quest**: ä»»åŠ¡ç³»ç»Ÿï¼ˆå¦‚"ä¸‹æ³¨â‰¥100 USDCå¥–åŠ±10 USDC"ï¼‰
- æ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹ï¼šä¸‹æ³¨é‡ã€é‚€è¯·æ•°ã€è¿ç»­ä¸‹æ³¨ç­‰
- è‡ªåŠ¨å‘æ”¾å¥–åŠ±æˆ–ç§¯åˆ†

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase, ReferralRegistry, RewardsDistributor
- è¢«ä¾èµ–: æ— 

**æµ‹è¯•è¦æ±‚**:
- [ ] Campaignå•å…ƒæµ‹è¯• (â‰¥15ä¸ª)
- [ ] Questå•å…ƒæµ‹è¯• (â‰¥20ä¸ª)
- [ ] ä»»åŠ¡å®Œæˆæ£€æµ‹æµ‹è¯•
- [ ] å¥–åŠ±å‘æ”¾æµ‹è¯•

---

#### 4.2 CreditToken & Coupon - å…ä½£åˆ¸ä¸åŠ æˆåˆ¸

**åˆçº¦åç§°**: `CreditToken.sol` + `Coupon.sol`
**è·¯å¾„**: `src/tokens/CreditToken.sol`, `src/tokens/Coupon.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M2 (ç¬¬5-8å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½
**é¢„ä¼°å·¥ä½œé‡**: 3-5å¤©

**åŠŸèƒ½æè¿°**:
- **CreditToken**: å…æ‰‹ç»­è´¹åˆ¸ï¼ˆERC-1155ï¼Œå¯äº¤æ˜“ï¼‰
- **Coupon**: èµ”ç‡åŠ æˆåˆ¸ï¼ˆå¦‚+5%èµ”ç‡ï¼‰
- æ”¯æŒè¿‡æœŸæ—¶é—´ã€ä½¿ç”¨æ¬¡æ•°é™åˆ¶
- é›†æˆåˆ°ä¸‹æ³¨æµç¨‹

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: MarketBase, FeeRouter
- è¢«ä¾èµ–: æ— 

**æµ‹è¯•è¦æ±‚**:
- [ ] CreditTokenå•å…ƒæµ‹è¯• (â‰¥10ä¸ª)
- [ ] Couponå•å…ƒæµ‹è¯• (â‰¥10ä¸ª)
- [ ] ä½¿ç”¨å’Œè¿‡æœŸæµ‹è¯•

---

#### 4.3 ParamController - å‚æ•°æ§åˆ¶å™¨

**åˆçº¦åç§°**: `ParamController.sol`
**è·¯å¾„**: `src/governance/ParamController.sol`
**æ‰€å±é‡Œç¨‹ç¢‘**: M1-M2 (ç¬¬3-8å‘¨)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„ä¼°å·¥ä½œé‡**: 4-6å¤©

**åŠŸèƒ½æè¿°**:
- é›†ä¸­ç®¡ç†ç³»ç»Ÿå‚æ•°ï¼ˆè´¹ç‡ã€é™é¢ã€è”åŠ¨ç³»æ•°ç­‰ï¼‰
- æ”¯æŒæ²»ç†ææ¡ˆä¿®æ”¹å‚æ•°
- é›†æˆTimelockå»¶è¿Ÿæ‰§è¡Œ
- å‚æ•°å˜æ›´äº‹ä»¶é€šçŸ¥

**ç®¡ç†çš„å‚æ•°**:
- æ‰‹ç»­è´¹ç‡ï¼ˆé»˜è®¤2%ï¼‰
- å•ç¬”ä¸‹æ³¨é™é¢
- å•ç”¨æˆ·/å•å¸‚åœºæ•å£é™é¢
- OU/AHè”åŠ¨ç³»æ•°
- æ¨èè¿”ä½£æ¯”ä¾‹

**ä¾èµ–å…³ç³»**:
- ä¾èµ–: Safeå¤šç­¾ + Timelock
- è¢«ä¾èµ–: FeeRouter, LinkedLinesController, ReferralRegistry

**æµ‹è¯•è¦æ±‚**:
- [ ] å•å…ƒæµ‹è¯• (â‰¥20ä¸ªæµ‹è¯•ç”¨ä¾‹)
- [ ] æ²»ç†æµç¨‹æµ‹è¯•
- [ ] Timelockå»¶è¿Ÿæµ‹è¯•
- [ ] å‚æ•°éªŒè¯æµ‹è¯•

---

## ğŸ“… å®æ–½è·¯çº¿å›¾

### ä¾èµ–å…³ç³»å›¾ï¼ˆMermaidï¼‰

```mermaid
graph TD
    A[MarketBase] --> B[WDL_Template âœ…]
    A --> C[OU_Template ğŸ”´]
    A --> D[AH_Template ğŸŸ¡]
    A --> E[ScoreTemplate ğŸŸ¢]

    F[SimpleCPMM âœ…] --> C
    F --> D

    G[LMSR ğŸ”´] --> E

    H[LinkedLinesController ğŸŸ¡] --> C
    H --> D

    I[FeeRouter âœ…] --> A
    J[ReferralRegistry âœ…] --> I

    K[MockOracle âœ…] --> A
    L[UMAOptimisticOracleAdapter ğŸŸ¡] --> A

    M[CorrelationGuard ğŸŸ¡] --> N[Basket ğŸŸ¡]
    A --> M

    O[ParamController ğŸŸ¡] --> I
    O --> H
    O --> J

    P[RewardsDistributor âœ…] --> Q[Campaign ğŸŸ¢]
    P --> R[Quest ğŸŸ¢]
    J --> Q

    style B fill:#90EE90
    style A fill:#90EE90
    style F fill:#90EE90
    style I fill:#90EE90
    style J fill:#90EE90
    style K fill:#90EE90
    style P fill:#90EE90

    style C fill:#FF6B6B
    style G fill:#FF6B6B

    style D fill:#FFD93D
    style H fill:#FFD93D
    style L fill:#FFD93D
    style M fill:#FFD93D
    style N fill:#FFD93D
    style O fill:#FFD93D

    style E fill:#A8E6CF
    style Q fill:#A8E6CF
    style R fill:#A8E6CF
```

**å›¾ä¾‹**:
- ğŸŸ¢ ç»¿è‰²: å·²å®ç°
- ğŸ”´ çº¢è‰²: é«˜ä¼˜å…ˆçº§å¾…å®ç°
- ğŸŸ¡ é»„è‰²: ä¸­ä¼˜å…ˆçº§å¾…å®ç°
- ğŸŸ¢ æµ…ç»¿: ä½ä¼˜å…ˆçº§å¾…å®ç°

---

### æŒ‰é‡Œç¨‹ç¢‘åˆ†ç»„

#### M1 é˜¶æ®µï¼ˆç¬¬3-4å‘¨ï¼‰- ä¸»æµç¨‹é—­ç¯ âœ… å·²å®Œæˆ

**ç›®æ ‡**: WDL + OUå•çº¿ã€AMMã€ç»“ç®—ã€å¥–åŠ±/æ¨è

**å·²å®Œæˆ**:
- âœ… WDL_Template
- âœ… OU_Templateï¼ˆå« Push é€€æ¬¾æœºåˆ¶ï¼‰
- âœ… SimpleCPMM
- âœ… FeeRouter
- âœ… RewardsDistributor
- âœ… ReferralRegistry
- âœ… MockOracle
- âœ… UMAOptimisticOracleAdapterï¼ˆç”Ÿäº§ç¯å¢ƒé¢„è¨€æœºï¼‰

**å¯é€‰æ”¹è¿›**:
- ğŸŸ¢ ParamController - 4-6å¤©ï¼ˆæ²»ç†åŸºç¡€è®¾æ–½ï¼Œå¯åœ¨ M2 å®Œæˆï¼‰

**çŠ¶æ€**: M1 æ ¸å¿ƒåŠŸèƒ½å·²å…¨éƒ¨å®Œæˆï¼Œå¯è¿›å…¥ M2 é˜¶æ®µ

---

#### M2 é˜¶æ®µï¼ˆç¬¬5-8å‘¨ï¼‰- è¿è¥é—­ç¯ â³ è¿›è¡Œä¸­

**ç›®æ ‡**: æ´»åŠ¨/ä»»åŠ¡ã€å‘¨åº¦Merkleã€OUå¤šçº¿è”åŠ¨ã€AH

**å·²å®Œæˆ**:
- âœ… (RewardsDistributorçš„å‘¨åº¦MerkleåŠŸèƒ½å·²å®ç°)

**å¾…è¡¥å……**:
- ğŸŸ¡ LinkedLinesController - 4-6å¤©
- ğŸŸ¡ OU_Template (å¤šçº¿æ‰©å±•) - 2-3å¤©
- ğŸŸ¡ AH_Template - 4-6å¤©
- ğŸŸ¡ ParamController - 4-6å¤©
- ğŸŸ¡ Basket + CorrelationGuard - 10-14å¤©
- ğŸŸ¢ Campaign + Quest - 5-7å¤©
- ğŸŸ¢ CreditToken + Coupon - 3-5å¤©

**é¢„ä¼°æ€»å·¥ä½œé‡**: 32-47å¤©

---

#### M3 é˜¶æ®µï¼ˆç¬¬9-12å‘¨ï¼‰- æ‰©ç©æ³•

**ç›®æ ‡**: ç²¾ç¡®æ¯”åˆ†ï¼ˆLMSRï¼‰ã€çƒå‘˜é“å…·ã€CLOBæ’æ§½

**å¾…è¡¥å……**:
- ğŸ”´ LMSR - 5-7å¤©
- ğŸŸ¢ ScoreTemplate - 5-7å¤©
- çƒå‘˜é“å…·æ¨¡æ¿ (æœªåˆ—å…¥å½“å‰æ¸…å•)
- CLOBæ’æ§½ (æœªåˆ—å…¥å½“å‰æ¸…å•)

**é¢„ä¼°æ€»å·¥ä½œé‡**: 10-14å¤© (ä»…å·²è§„åˆ’éƒ¨åˆ†)

---

## ğŸ¯ å»ºè®®çš„å®æ–½é¡ºåº

### é˜¶æ®µ1: å®ŒæˆM1æ ¸å¿ƒåŠŸèƒ½ï¼ˆWeek 6-7ï¼‰

**ä¼˜å…ˆçº§æ’åº**:
1. **OU_Template (å•çº¿)** - 3-5å¤©
   - å®ŒæˆM1çš„æ ¸å¿ƒç©æ³•ç›®æ ‡
   - æµ‹è¯•å®Œæ•´ä¸‹æ³¨â†’ç»“ç®—æµç¨‹

2. **UMAOptimisticOracleAdapter** - 4-5å¤©
   - ä¸ºç”Ÿäº§ç¯å¢ƒå‡†å¤‡
   - æµ‹è¯•ä¹è§‚å¼ç»“ç®—æµç¨‹

**é‡Œç¨‹ç¢‘éªŒè¯**: å®Œæ•´è¿è¡Œ WDL + OU å¸‚åœºçš„ç«¯åˆ°ç«¯æµç¨‹

---

### é˜¶æ®µ2: å¯åŠ¨M2è¿è¥åŠŸèƒ½ï¼ˆWeek 8-10ï¼‰

**å¹¶è¡Œå¼€å‘**:
- Track 1: **ParamController + LinkedLinesController** - 8-12å¤©
  - æ²»ç†åŸºç¡€è®¾æ–½
  - å¤šçº¿è”åŠ¨å®šä»·

- Track 2: **Basket + CorrelationGuard** - 10-14å¤©
  - ä¸²å…³ç³»ç»Ÿ
  - ç›¸å…³æ€§æ£€æµ‹

**é¡ºåºå¼€å‘**:
- **AH_Template** - 4-6å¤© (ä¾èµ–LinkedLinesController)
- **OU_Templateå¤šçº¿æ‰©å±•** - 2-3å¤© (ä¾èµ–LinkedLinesController)

---

### é˜¶æ®µ3: è¿è¥æ¿€åŠ±ç³»ç»Ÿï¼ˆWeek 11-12ï¼‰

**ä½ä¼˜å…ˆçº§åŠŸèƒ½**:
- **Campaign + Quest** - 5-7å¤©
- **CreditToken + Coupon** - 3-5å¤©

**é‡Œç¨‹ç¢‘éªŒè¯**: å®Œæ•´è¿è¥é—­ç¯ï¼ˆæ´»åŠ¨â†’ä»»åŠ¡â†’å¥–åŠ±â†’åˆ¸ï¼‰

---

### é˜¶æ®µ4: é«˜çº§ç©æ³•ï¼ˆWeek 13+ï¼‰

**M3ç›®æ ‡**:
- **LMSR** - 5-7å¤©
- **ScoreTemplate** - 5-7å¤©
- çƒå‘˜é“å…·æ¨¡æ¿
- CLOBé›†æˆ

---

## ğŸ“‹ æ¯ä¸ªåˆçº¦çš„æµ‹è¯•è¦æ±‚è§„èŒƒ

### æœ€å°æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

| åˆçº¦ç±»å‹ | è¡Œè¦†ç›–ç‡ | åˆ†æ”¯è¦†ç›–ç‡ | å‡½æ•°è¦†ç›–ç‡ |
|---------|---------|-----------|-----------|
| å®šä»·å¼•æ“ | â‰¥85% | â‰¥80% | 100% |
| å¸‚åœºæ¨¡æ¿ | â‰¥80% | â‰¥75% | â‰¥95% |
| ä¸²å…³ç³»ç»Ÿ | â‰¥80% | â‰¥75% | â‰¥95% |
| é¢„è¨€æœº | â‰¥85% | â‰¥80% | 100% |
| è¿è¥åŸºå»º | â‰¥75% | â‰¥70% | â‰¥90% |

### å¿…éœ€çš„æµ‹è¯•ç±»å‹

æ¯ä¸ªåˆçº¦å¿…é¡»åŒ…å«:
1. **å•å…ƒæµ‹è¯•**: æµ‹è¯•æ¯ä¸ªå…¬å¼€/å¤–éƒ¨å‡½æ•°
2. **è¾¹ç•Œæµ‹è¯•**: é›¶å€¼ã€æœ€å¤§å€¼ã€æº¢å‡ºåœºæ™¯
3. **æƒé™æµ‹è¯•**: onlyOwnerã€è§’è‰²æ§åˆ¶éªŒè¯
4. **çŠ¶æ€è½¬æ¢æµ‹è¯•**: ç”Ÿå‘½å‘¨æœŸå„é˜¶æ®µéªŒè¯
5. **é›†æˆæµ‹è¯•**: ä¸ä¾èµ–åˆçº¦çš„äº¤äº’æµ‹è¯•
6. **Gasä¼˜åŒ–æµ‹è¯•**: å…³é”®æ“ä½œçš„GasåŸºå‡†

### é«˜é£é™©åˆçº¦é¢å¤–è¦æ±‚

å®šä»·å¼•æ“ã€ä¸²å…³ç³»ç»Ÿã€é¢„è¨€æœºè¿˜éœ€:
- **ä¸å˜é‡æµ‹è¯•** (Echidna): éªŒè¯æ ¸å¿ƒä¸å˜é‡
- **æ¨¡ç³Šæµ‹è¯•**: éšæœºè¾“å…¥æµ‹è¯•
- **Formal Verification** (å¯é€‰): å…³é”®æ•°å­¦å…¬å¼éªŒè¯

---

## ğŸ“Š å·¥ä½œé‡æ±‡æ€»

### æŒ‰ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | åˆçº¦æ•°é‡ | é¢„ä¼°æ€»å¤©æ•° |
|-------|---------|-----------|
| ğŸ”´ é«˜ | 1ä¸ª | 5-7å¤© |
| ğŸŸ¡ ä¸­ | 5ä¸ª | 26-38å¤© |
| ğŸŸ¢ ä½ | 3ä¸ª | 13-19å¤© |
| **æ€»è®¡** | **9ä¸ª** | **44-64å¤©** |

### æŒ‰ç±»åˆ«

| ç±»åˆ« | åˆçº¦æ•°é‡ | é¢„ä¼°æ€»å¤©æ•° |
|------|---------|-----------|
| å®šä»·å¼•æ“ | 2ä¸ª | 9-13å¤© |
| å¸‚åœºæ¨¡æ¿ | 2ä¸ª | 9-13å¤© |
| ä¸²å…³ç³»ç»Ÿ | 2ä¸ª | 10-14å¤© |
| è¿è¥åŸºå»º | 3ä¸ª | 12-18å¤© |
| **æ€»è®¡** | **9ä¸ª** | **40-58å¤©** |

---

## ğŸš¨ å…³é”®é£é™©ä¸å»ºè®®

### âœ… é£é™©1: M1æ ¸å¿ƒåŠŸèƒ½æœªå®Œæˆ - å·²è§£å†³

**åŸçŠ¶æ€**: OU_Templateç¼ºå¤±å¯¼è‡´M1ç›®æ ‡æœªè¾¾æˆ

**å½“å‰çŠ¶æ€**: âœ… å·²å®Œæˆ
- OU_Template å•çº¿ç‰ˆæœ¬å·²å®ç°ï¼ˆå« Push é€€æ¬¾æœºåˆ¶ï¼‰
- UMA OO å·²å®Œæ•´é›†æˆ
- M1 æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å®Œæˆ

---

### é£é™©2: ä¾èµ–é“¾é˜»å¡

**å½±å“**: LinkedLinesControlleræœªå®Œæˆå¯¼è‡´AHå’ŒOUå¤šçº¿æ— æ³•å¼€å‘

**å»ºè®®**:
- æå‰è§„åˆ’LinkedLinesControlleræ¥å£
- AHå’ŒOUå¤šçº¿å¯å…ˆåŸºäºæ¥å£Mockå¼€å‘

---

### é£é™©3: æµ‹è¯•è¦†ç›–ç‡

**å½±å“**: éœ€è¦ç»´æŒé«˜æµ‹è¯•è¦†ç›–ç‡ç¡®ä¿ä»£ç è´¨é‡

**å½“å‰çŠ¶æ€**:
- æ€»ä½“è¦†ç›–ç‡: 76.15%
- æµ‹è¯•é€šè¿‡ç‡: 100% (344/344)
- å…³é”®åˆçº¦è¦†ç›–ç‡å‡ >75%

**å»ºè®®**:
- ç»§ç»­ç»´æŒæ¯ä¸ªæ–°åˆçº¦â‰¥80%è¦†ç›–ç‡
- è¡¥å……ä¸å˜é‡æµ‹è¯•ï¼ˆEchidnaï¼‰
- å®šæœŸè¿è¡Œ Slither å®‰å…¨æ‰«æ

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨é¡¹ï¼ˆæœ¬å‘¨ï¼‰

### âœ… å·²å®Œæˆé¡¹ï¼ˆWeek 5-6ï¼‰

1. âœ… **ä¿®å¤æµ‹è¯•å¤±è´¥**
   - æ‰€æœ‰ 344 ä¸ªæµ‹è¯•é€šè¿‡

2. âœ… **OU_Template å¼€å‘**
   - å•çº¿ç‰ˆæœ¬ + Push é€€æ¬¾æœºåˆ¶
   - å®Œæ•´æµ‹è¯•å¥—ä»¶
   - é›†æˆåˆ° Keeper æœåŠ¡

3. âœ… **UMAOptimisticOracleAdapter å¼€å‘**
   - é›†æˆ UMA OO V3
   - å®Œæ•´äº‰è®®æµç¨‹æµ‹è¯•
   - Go Keeper é›†æˆ

4. âœ… **Subgraph å®Œæ•´éƒ¨ç½²**
   - Graph Node æœ¬åœ°éƒ¨ç½²
   - ç«¯åˆ°ç«¯æ•°æ®æµéªŒè¯

### é«˜ä¼˜å…ˆçº§ï¼ˆWeek 6-7ï¼‰

1. ğŸŸ¡ **ParamController å¼€å‘** (4-6å¤©)
   - æ²»ç†åŸºç¡€è®¾æ–½
   - Timelock é›†æˆ
   - å‚æ•°ç®¡ç†ç•Œé¢

2. ğŸŸ¡ **LinkedLinesController è§„åˆ’ä¸å¼€å‘** (4-6å¤©)
   - å®šä¹‰æ ‡å‡†æ¥å£
   - å®ç°è”åŠ¨å®šä»·ç®—æ³•
   - é˜²å¥—åˆ©æœºåˆ¶

### ä¸­ä¼˜å…ˆçº§ï¼ˆWeek 8-10ï¼‰

3. ğŸŸ¡ **Basket + CorrelationGuard å¼€å‘** (10-14å¤©)
   - ä¸²å…³ç»„åˆä¸‹æ³¨
   - ç›¸å…³æ€§æ£€æµ‹å’Œæƒ©ç½š
   - å®Œæ•´æµ‹è¯•å¥—ä»¶

4. ğŸŸ¡ **AH_Template å¼€å‘** (4-6å¤©)
   - ä¾èµ– LinkedLinesController
   - è®©çƒå¸‚åœºæ¨¡æ¿
   - å¤æ‚é€€æ¬¾é€»è¾‘

---

## ğŸ“š å‚è€ƒèµ„æº

### è®¾è®¡æ–‡æ¡£
- `docs/design/02_AMM_LinkedLines.md` - è”åŠ¨çº¿è®¾è®¡
- `docs/design/04_Parlay_CorrelationGuard.md` - ä¸²å…³è®¾è®¡
- `docs/design/03_ResultOracle_OO.md` - UMAé¢„è¨€æœºé›†æˆ

### å¤–éƒ¨èµ„æº
- [UMA Optimistic Oracle V3 Docs](https://docs.uma.xyz/)
- [Gnosis Conditional Tokens](https://docs.gnosis.io/conditionaltokens/)
- [Polymarket Contract Architecture](https://github.com/Polymarket)

---

**æ–‡æ¡£ç»´æŠ¤**: æ¯å®Œæˆä¸€ä¸ªåˆçº¦åæ›´æ–°æ­¤æ–‡æ¡£ï¼Œç§»åŠ¨åˆ°"å·²å®ç°"éƒ¨åˆ†

**ä¸‹æ¬¡æ›´æ–°å»ºè®®**: Week 8 ç»“æŸæ—¶
