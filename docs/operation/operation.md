下面给你一套**去中心化、可验证、可控成本**的推广与激励机制设计（不涉及合规与代码，聚焦架构/机制）。目标：让用户愿意主动拉新与留存，同时避免被“薅羊毛”。

# 1. 激励资金的“水龙头”与预算上限

* **来源划分（协议收入路由）**
  每笔交易费/点差（rake）按比例分配：

  * 60% → LP/做市奖励
  * 20% → 推广与返利池（**Promo Pool**）
  * 15% → 保险基金
  * 5% → 协议金库
* **动态预算闸门**
  Promo Pool 采用**阶梯释放**：当周净收入 × 20% 上限；若当周亏损则下周补释放 ≤ 10%。从源头避免“超发”导致负毛利。

# 2. On-chain 引荐关系：一次绑定，长期分成

* **ReferralRegistry 合约**：

  * 用户首次与协议交互时（首次下注/存入），可携带 `referrer`（签名或邀请码）。
  * **一经绑定不可更改**（防止洗量）；仅记录一次，事件上链，便于索引（Subgraph）。
* **尾随分成（Trailing Revenue Share）**：

  * 推荐人获得被推荐人**净交易费的 X%**，持续 **90 天滚动**计算。
  * 建议区间：基础 8%–12%，达到阈值后升级（见 §3）。
* **被推荐人返利（Rakeback）**：

  * 被推荐人获得自己交易费的 **Y% 现金返还**或“免佣券”（free bet credit）。
  * 建议 Y=2%–5%，按周结算入可提或可用余额。
* **成本可控性**：

  * X + Y ≤ Promo Pool 可用额度；当周不足则按比例衰减发放（合约内置“按预算分摊”）。

# 3. 分层联盟（Affiliate）+ 可升级权益

* **成长阶梯（30 天滚动窗口）**

  * Tier 0：≥ 5 个有效新用户（首周≥N笔/≥M金额），返佣 8%
  * Tier 1：≥ 20 个，返佣 10% + 每月空投门票 NFT
  * Tier 2：≥ 100 个，返佣 12% + 专属“推广人 SBT”解锁创建活动权限
  * Tier 3（申请制）：返佣 12% 固定 + 可申请**赛季联名活动预算**（需要质押与 KPI）
* **SBT（Soulbound Token）做权限门**

  * 发放“Promoter SBT（不可转移）”，具备**创建活动页、发放优惠 NFT、获得额外分成**等能力。
  * 防止倒卖账户，叠加**信誉分**（见 §8 反作弊）。

# 4. “可验证拉新”的三种素材形态

* **签名链接**：`/join?ref=addr&sig=…`；轻量、通用。
* **Referral NFT Pass（ERC-1155）**：

  * 推荐人铸造若干“入场券 NFT”（带有效期/批次号），转给潜在用户；新用户用此 NFT 首次参与即绑定推荐关系，并获得一次性**免佣券**。
* **链下二维码 → 链上校验**：

  * 线下观赛/社区活动用二维码发放“空投券”，扫码后由前端完成链上绑定与领券动作；所有凭证在链上校验可追踪。

# 5. 用户留存：任务/赛季/战队

* **On-chain Quests（任务）**

  * 连续 7 天打卡下注、首次 LP、首次串关、参与顶级赛事等；完成任务发放**任务积分**与**可交易纪念 NFT**。
* **赛季积分 & 排行**

  * 每月/每赛季累计积分，前 X% 获得赛季空投（来自 Promo Pool）；
  * 保持“正期望值”控制：仅以**有效投注额和参与深度**计分，排除自买自卖刷量（见 §8）。
* **战队模式（Team Play）**

  * 推广人可创建“战队”，队员投注累计产生**战队分**，赛季发放**团队宝箱**（随机免佣券、徽章、少量返现）。

# 6. LP 与预言机参与者的交叉激励

* **LP 推荐**：

  * 若 A 推荐的用户 B 成为 LP，A 除常规返佣外，获得 B 的**LP 绩效费的 α%**（建议 2%–3%）。
* **预言机/上报人激励协同**：

  * 持有 Promoter SBT 的地址可获得**比赛结果上报保证金收益的 β%**分润（仅在上报正确、无人挑战时），鼓励“推广 + 维护生态”。

# 7. Free Bet / 免佣券的“可组合”设计

* **Credit Token（额度券）**

  * ERC-20 形式的“免佣额度”，只能**抵扣交易费/点差**，不可直接提现；
  * 发放路径：拉新首单、任务奖励、赛季奖励、活动盲盒；
  * **过期与上限**：30 天有效、单笔最多抵扣手续费的 50%，避免被一次性套空。
* **串关加成券**

  * 对 ≥2 场串关提供**赔率微加成**（如 +0.5%），由 Promo Pool 承担预期成本（合约按历史胜率估算预算消耗）。

# 8. 反作弊与风控（不涉合规，仅经济/机制）

* **有效用户定义（智能过滤）**

  * 新用户需满足：① 首周 ≥K 笔且金额 ≥M；② 与推荐人不存在**强相关链上关系**（近 30 天双向资金转移、同一 LP 份额频繁互转、同设备指纹的登录签名等——设备指纹属于链下校验，可选）；
  * 采用**Gitcoin Passport / BrightID / World ID** 等可选**人机/唯一性分**作为加权（> 阈值享受满额返利）。
* **反自成交/对敲**

  * 计算“对手盘重合度”（被推荐人与推荐人或其已绑定用户的对手成交频率/金额占比），超过阈值则该部分不计入返佣；
  * 引入**成交图谱评分**：与小圈子循环成交相关度越高，权重递减。
* **提现延迟 & 线性释放**

  * 返佣与返利 T+7 线性释放，若期间被系统标记“高风险”，自动暂停释放并允许申诉（链上仲裁或治理法庭）。
* **质押与惩罚**

  * 高等级推广人需**质押**（可用稳定币/SBT 评分抵押），若被判定恶意洗量，从质押中扣罚。

# 9. 活动与品牌协同（去中心化运维方式）

* **赛事季节性活动**

  * 五大联赛开季、欧冠、世界杯等节点，开启**赛季任务 + 限时加成券**；
  * 所有活动参数（预算上限、时长、奖励档位）由 DAO 提案、timelock 生效。
* **UGC 活动页（由 Promoter 创建）**

  * SBT 持有者可创建“主题页”（如德比日精选盘），从主题页带来的成交**额外 +1%** 返佣（从 Promo Pool）——形成内容驱动的分发。

# 10. 结算与透明度

* **可验证账本**：

  * 每周生成**Merkle 奖励树**（包含推荐分成、返利、任务奖励），上链一个 root；
  * 用户自证领取（Merkle proof）；预算不足时按比例缩放（写在叶子节点中）。
* **公开仪表盘（Subgraph）**：

  * 新增用户数、有效用户率、返佣/返利发放率、CAC/LTV、作弊拦截率、Promo Pool 健康度。
* **可回溯参数**：

  * 所有活动/参数版本的 IPFS 哈希上链，方便审计与复盘。

# 11. 关键参数建议（可由 DAO 调整）

* 推荐分成 X：8%（基础）→12%（高阶）
* 被推荐人返利 Y：2%–5%（与活跃度挂钩）
* 返佣周期：绑定后 90 天；大户可续期（需达阈值）
* 任务积分权重：有效投注额按对数缩放（防巨鲸统治）
* 预算：Promo Pool = 当周净收入 × 20%，当周上限释放，超出部分结转
* 线性释放：T+7 / T+14（视洗量风险而定）

# 12. 落地路线图（不写代码的工程顺序）

1. 第 0 版：ReferralRegistry + 基础返佣（X=8%，Y=2%）+ 每周 Merkle 发放
2. 第 1 版：任务系统（Quests）+ 免佣券 Credit Token + Subgraph 仪表盘
3. 第 2 版：分层联盟 + SBT 权限 + 战队模式
4. 第 3 版：反作弊评分（链上图谱 & 护照加权）+ 线性释放 + 质押惩罚
5. 第 4 版：活动工厂（Promoter 自助创建活动页）+ 赛季预算治理

---

## 一句话总结

用**“一次绑定、长期分成 + 被推荐人返利”**做基础盘，用**任务/赛季/战队/SBT 权限**做进阶增长杠杆，用**Merkle 发放 + 预算闸门 + 反作弊评分**守住财务与风控底线；全流程上链可验证，既能激励用户自发推广，又不至于被刷空。你要的话，我可以把这些机制进一步细化为具体的**合约接口与事件清单**，方便直接对接实现。

